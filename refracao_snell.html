
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Refração — Lei de Snell + Reflexão Interna Total</title>
<style>
  :root{--bg:#0b1220;--muted:#a8b3c7;--text:#eef4ff;--accent:#66a3ff}
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
  header{position:sticky;top:0;padding:14px 18px;background:#0e1526;border-bottom:1px solid #1e293b}
  h1{margin:0;font-size:clamp(18px,3vw,26px)} .muted{color:var(--muted)}
  .wrap{max-width:1100px;margin:16px auto;padding:0 16px}
  .grid{display:grid;grid-template-columns:300px 1fr;gap:12px} @media(max-width:900px){.grid{grid-template-columns:1fr}}
  .controls{background:#0e1930;border:1px solid #1f2a44;border-radius:14px;padding:12px}
  .ctrl{margin:10px 0} .ctrl label{display:flex;justify-content:space-between;gap:10px}
  input[type=range]{width:100%} .legend{color:var(--muted);font-size:13px;margin-top:8px}
  canvas{width:100%;height:520px;background:#0b1326;border:1px solid #1f2a44;border-radius:14px}
  .pill{display:inline-block;border:1px solid #2c3a57;border-radius:999px;padding:4px 10px;margin-right:6px;color:var(--muted)}
</style>
</head>
<body>
<header><h1>Refração (Snell) <span class="muted">— n₁·senθ₁ = n₂·senθ₂, RIT quando θ₁ &gt; θc</span></h1></header>
<div class="wrap">
  <div class="grid">
    <div class="controls">
      <div class="ctrl"><label>Ângulo de incidência θ₁ (°) <span id="ang_v">30</span></label>
        <input id="ang" type="range" min="0" max="85" step="1" value="30"></div>
      <div class="ctrl"><label>Índice n₁ (meio superior) <span id="n1_v">1.33</span></label>
        <input id="n1" type="range" min="1.00" max="2.50" step="0.01" value="1.33"></div>
      <div class="ctrl"><label>Índice n₂ (meio inferior) <span id="n2_v">1.00</span></label>
        <input id="n2" type="range" min="1.00" max="2.50" step="0.01" value="1.00"></div>
      <div class="legend">
        • Se n₁ &gt; n₂ e θ₁ &gt; θc, ocorre <b>Reflexão Interna Total</b> (sem refração).<br>
        • θc = arcsen(n₂/n₁) quando n₁ &gt; n₂.
      </div>
      <div style="margin-top:8px">
        <span class="pill">Normal (tracejada)</span>
        <span class="pill">Raio incidente (ciano)</span>
        <span class="pill">Raio refratado (verde)</span>
        <span class="pill">Raio refletido (amarelo)</span>
      </div>
    </div>
    <canvas id="cv" width="1000" height="520"></canvas>
  </div>
</div>
<script>
const cv = document.getElementById('cv'), ctx=cv.getContext('2d');
const ang = document.getElementById('ang'), ang_v=document.getElementById('ang_v');
const n1 = document.getElementById('n1'), n1_v=document.getElementById('n1_v');
const n2 = document.getElementById('n2'), n2_v=document.getElementById('n2_v');

function draw(){
  const W=cv.width,H=cv.height, yI=H*0.5; // interface horizontal em y=yI
  const theta1 = ang.value*Math.PI/180; ang_v.textContent=ang.value;
  const n_1 = parseFloat(n1.value), n_2=parseFloat(n2.value); n1_v.textContent=n_1.toFixed(2); n2_v.textContent=n_2.toFixed(2);
  ctx.clearRect(0,0,W,H);
  // fundos dos meios
  ctx.fillStyle='#0e1830'; ctx.fillRect(0,0,W,yI);
  ctx.fillStyle='#0a1226'; ctx.fillRect(0,yI,W,H-yI);
  ctx.fillStyle='#9cc2ff'; ctx.font='12px ui-monospace'; ctx.fillText('Meio (n₁)', 12, yI-8); ctx.fillText('Meio (n₂)', 12, yI+16);
  // normal
  const xN=W*0.56;
  ctx.save(); ctx.setLineDash([8,6]); ctx.strokeStyle='#94a3b8'; ctx.beginPath(); ctx.moveTo(xN,yI-200); ctx.lineTo(xN,yI+200); ctx.stroke(); ctx.restore();
  // raio incidente: vem de cima esquerda em direção ao ponto (xN,yI)
  const len=260;
  const xi=xN - Math.sin(theta1)*len, yi=yI - Math.cos(theta1)*len;
  ctx.strokeStyle='#4de3c4'; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(xi, yi); ctx.lineTo(xN, yI); ctx.stroke();
  // snell -> theta2
  let rit=false, theta2=0;
  if(n_1>n_2){
    const sc = n_2/n_1;
    const theta_c = Math.asin(Math.min(1, Math.max(0, sc)));
    if(theta1>theta_c){ rit=true; }
  }
  if(!rit){
    const s2 = n_1*Math.sin(theta1)/n_2;
    theta2 = Math.asin(Math.max(-1, Math.min(1, s2)));
    // refratado (para baixo): desvia para longe/para perto da normal conforme n
    const xr = xN + Math.sin(theta2)*len, yr = yI + Math.cos(theta2)*len;
    ctx.strokeStyle='#34d399'; ctx.beginPath(); ctx.moveTo(xN, yI); ctx.lineTo(xr, yr); ctx.stroke();
  }
  // refletido sempre existe (parte da luz), aqui ilustramos um raio
  const xref = xN + Math.sin(theta1)*len, yref = yI - Math.cos(theta1)*len;
  ctx.strokeStyle='#fbbf24'; ctx.beginPath(); ctx.moveTo(xN, yI); ctx.lineTo(xref, yref); ctx.stroke();
  // textos
  ctx.fillStyle='#cfe6ff';
  if(rit){ ctx.fillText('RIT: θ₁ > θc, sem refração', xN-70, yI+34); }
  ctx.fillText('θ₁', xN-26, yI-10); ctx.fillText('θ₂', xN+12, yI+14);
}
[ang,n1,n2].forEach(e=>e.addEventListener('input', draw)); draw();
</script>
</body></html>
